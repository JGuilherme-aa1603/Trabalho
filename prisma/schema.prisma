
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}
        
model promessas {
  id           Int         @id @default(autoincrement())
  usuario_id   Int
  titulo       String      @db.VarChar(100)
  promessa     String
  data_criacao DateTime?   @default(now()) @db.Timestamp(6)
  ativo        Boolean?    @default(true)
  categoria_id Int?
  categorias   categorias? @relation(fields: [categoria_id], references: [id], onUpdate: NoAction, map: "fk_promessa_categoria")
  usuarios     usuarios    @relation(fields: [usuario_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_promessas_usuario")

  @@index([ativo], map: "idx_promessas_ativo")
  @@index([usuario_id], map: "idx_promessas_usuario")
}

model usuarios {
  id            Int         @id @default(autoincrement())
  nome          String      @db.VarChar(100)
  email         String      @unique @db.VarChar(150)
  senha_hash    String      @db.VarChar(255)
  data_cadastro DateTime?   @default(now()) @db.Timestamp(6)
  ativo         Boolean?    @default(true)
  promessas     promessas[]

  @@index([email], map: "idx_usuarios_email")
}

model categorias {
  id         Int         @id @default(autoincrement())
  nome       String      @unique @db.VarChar(50)
  promessas  promessas[]
}
